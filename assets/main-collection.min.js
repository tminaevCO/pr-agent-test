(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}function o(t,r,n){return r=u(r),function(t,r){if(r&&("object"==e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,a()?Reflect.construct(r,n||[],u(t).constructor):r.apply(t,n))}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(a())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var i=new(e.bind.apply(e,n));return r&&l(i,r.prototype),i}(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)},c(e)}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a=function(){return!!e})()}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}if(void 0===customElements.get("main-collection")){var s=function(e){function r(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(e=o(this,r)).sortingDropdown=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(r,e),i=r,c=[{key:"replaceProducts",value:function(e){this.querySelector(".main-collection__grid").innerHTML=e.querySelector(".main-collection__grid").innerHTML,this.querySelector(".custom-pagination")&&window.initCustomPagination&&window.initCustomPagination()}},{key:"replaceFilters",value:function(e){var r=t(this.querySelectorAll("details")).map((function(e){return 1==e.open&&e.dataset.filter})).filter(Boolean);r.length&&r.forEach((function(t){e.querySelector('[data-filter="'.concat(t,'"]')).open=!0})),this.querySelector(".main-collection__filters").innerHTML=e.querySelector(".main-collection__filters").innerHTML,this.querySelector("price-range")&&this.querySelector("price-range").init()}},{key:"replaceFiltersBar",value:function(e){this.querySelector(".main-collection__filters-bar").innerHTML=e.querySelector(".main-collection__filters-bar").innerHTML}},{key:"requestFilteredCollection",value:function(e){var t=this;this.classList.add("loading"),fetch("".concat(e).concat(e.includes("?")?"&":"?","section_id=").concat(this.dataset.originalSection)).then((function(e){return e.text()})).then((function(r){var n=(new DOMParser).parseFromString(r,"text/html").querySelector("main-collection");t.replaceProducts(n),t.replaceFilters(n),t.replaceFiltersBar(n),t.replaceUrl(e),t.init(),t.classList.remove("loading")}))}},{key:"replaceUrl",value:function(e){window.history.replaceState({},"",e),window.location.search.includes("filter.v.price")&&this.querySelector("price-range").updateInputs()}},{key:"changeUrl",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"set",n=new URL(window.location.href);switch(r){case"set":n.searchParams.set(e,"".concat(t));break;case"append":n.searchParams.append(e,"".concat(t));break;case"delete":n.searchParams.delete(e,"".concat(t))}return n.searchParams.has("page")&&n.searchParams.set("page",1),n.toString()}},{key:"initListeners",value:function(){var e=this;if(this.sortingDropdown){var r=this.sortingDropdown.querySelectorAll('input[type="radio"]');r.length&&r.forEach((function(n){n.addEventListener("change",(function(){var i=t(r).find((function(e){return e.classList.contains("active")}));i&&i.classList.remove("active"),n.classList.add("active");var o=n.value,c=e.changeUrl("sort_by",o,"set");e.requestFilteredCollection(c)}))}))}this.filterCheckboxes.length&&this.filterCheckboxes.forEach((function(t){t.addEventListener("change",(function(){var r=t.name,n=t.value,i=null;t.classList.contains("active")?(t.classList.remove("active"),i=e.changeUrl(r,n,"delete")):(t.classList.add("active"),i=e.changeUrl(r,n,"append")),e.requestFilteredCollection(i)}))})),this.resetFilterLinks.length&&this.resetFilterLinks.forEach((function(t){t.addEventListener("click",(function(r){r.preventDefault();var n=t.getAttribute("href");e.requestFilteredCollection(n),e.replaceUrl(n)}))})),this.priceRangeMin&&this.priceRangeMax&&(this.priceRangeMin.addEventListener("change",(function(){var t=e.priceRangeMin.name,r=e.priceRangeMin.value,n=e.changeUrl(t,r,"set");e.requestFilteredCollection(n)})),this.priceRangeMax.addEventListener("change",(function(){var t=e.priceRangeMax.name,r=e.priceRangeMax.value,n=e.changeUrl(t,r,"set");e.requestFilteredCollection(n)}))),this.filterPopup&&this.filterButtonPopup&&(this.filterPopup.addEventListener("click",(function(t){t.target===e.filterPopup&&e.hidePopup()})),this.filterButtonPopup&&this.filterButtonPopup.addEventListener("click",(function(t){t.preventDefault(),e.showPopup()})),this.filterPopupSubmit&&this.filterPopupSubmit.addEventListener("click",(function(t){t.preventDefault(),e.hidePopup()})),this.filterPopupClose&&this.filterPopupClose.addEventListener("click",(function(t){t.preventDefault(),e.hidePopup()})))}},{key:"showPopup",value:function(){document.querySelector("body").classList.add("locked"),this.filterPopup.classList.remove("hidden"),this.filterPopup.setAttribute("open",!0)}},{key:"hidePopup",value:function(){var e=this;document.querySelector("body").classList.remove("locked"),this.filterPopup.removeAttribute("open"),setTimeout((function(){e.filterPopup.classList.add("hidden")}),300)}},{key:"init",value:function(){this.sortingDropdown=this.querySelector('details[data-filter="Sorting"]'),this.filterCheckboxes=this.querySelectorAll('.main-collection__filters input[type="checkbox"]'),this.resetFilterLinks=this.querySelectorAll("a[data-reset-filters]"),this.priceRangeMin=this.querySelector(".main-collection__filters .filter-group-display__price-range-from"),this.priceRangeMax=this.querySelector(".main-collection__filters .filter-group-display__price-range-to"),this.filterPopup=this.querySelector(".main-collection__filters--wrapper"),this.filterButtonPopup=this.querySelector("button[data-open-filters-sidebar]"),this.filterPopupSubmit=this.querySelector("button[data-submit-filters]"),this.filterPopupClose=this.querySelector("[data-close-popup]"),this.initListeners()}},{key:"connectedCallback",value:function(){var e=this;document.addEventListener("DOMContentLoaded",(function(){e.init()}))}}],c&&n(i.prototype,c),a&&n(i,a),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,c,a}(c(HTMLElement));customElements.define("main-collection",s),document.addEventListener("shopify:section:load",(function(e){e.target.querySelector("main-collection")&&e.target.querySelector("main-collection").init()}))}})();